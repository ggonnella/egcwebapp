{% set nested_colspan = 9 %}
<tr>
  <td>
    {% include 'linked_record_id.html' %}
  </td>
  <td>
    {% if crule.source is string %}
      {% set related_kind, related_id = 'extract', crule.source %}
      {% include 'refs_link.html' %}
    {% else %}
      {% for source in crule.source %}
        {% set related_kind, related_id = 'extract', source %}
        {% include 'refs_link.html' %}
      {% endfor %}
    {% endif %}
  </td>
  <td>
    {% if crule.attribute is string %}
      {% set related_kind, related_id = 'attribute', crule.attribute %}
      {% include 'refs_link.html' %}
    {% else %}
      {% set related_kind, related_id = 'attribute', crule.attribute.id1 %}
      {% include 'refs_link.html' %}
      <br/>vs.<br/>
      {% set related_kind, related_id = 'attribute', crule.attribute.id2 %}
      {% include 'refs_link.html' %}
    {% endif %}
  </td>
  <td>
    {% set related_kind, related_id = 'group', crule.group1.id %}
    {% include 'refs_link.html' %}
  </td>
  <td>
    {% if crule.group1.portion %}
      {{ crule.group1.portion }}
    {% endif %}
  </td>
  <td>{{ crule.operator }}</td>
  <td>
    {% set related_type, related_id = 'group', crule.group2.id %}
    {% include 'refs_link.html' %}
  </td>
  <td>
    {% if crule.group2.portion %}
      {{ crule.group2.portion }}
    {% endif %}
  </td>
  <td>
    {% include 'tags_lines.html' %}
  </td>
  <td>
    {% include 'record_actions.html' %}
  </td>
</tr>
